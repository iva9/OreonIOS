{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { NavParams, ModalController } from '@ionic/angular';\nimport { AngularFireDatabase } from '@angular/fire/database';\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport { Router } from '@angular/router';\nimport { IonContent } from \"@ionic/angular\";\nimport { AlertController } from '@ionic/angular';\nimport { InAppBrowser } from '@ionic-native/in-app-browser/ngx';\nimport * as moment from 'moment';\nimport firebase from 'firebase/app';\nimport { AngularFirestore } from '@angular/fire/firestore';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/fire/database\";\nimport * as i4 from \"@angular/fire/auth\";\nimport * as i5 from \"@angular/fire/firestore\";\nimport * as i6 from \"@ionic-native/in-app-browser/ngx\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"@angular/forms\";\n\nfunction EventomodalPage_ion_title_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-title\", 18);\n    i0.ɵɵlistener(\"click\", function EventomodalPage_ion_title_2_Template_ion_title_click_0_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.close();\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r0.x.nome, \" \");\n  }\n}\n\nfunction EventomodalPage_img_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"img\", 19);\n    i0.ɵɵlistener(\"click\", function EventomodalPage_img_6_Template_img_click_0_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return ctx_r9.close();\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"src\", ctx_r1.x.url, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction EventomodalPage_ion_item_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\");\n    i0.ɵɵelement(1, \"ion-icon\", 20);\n    i0.ɵɵelementStart(2, \"h2\", 21);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.x.dia, \" \");\n  }\n}\n\nfunction EventomodalPage_ion_item_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-item\", 22);\n    i0.ɵɵlistener(\"click\", function EventomodalPage_ion_item_16_Template_ion_item_click_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.redirectlink();\n    });\n    i0.ɵɵelement(1, \"ion-icon\", 23);\n    i0.ɵɵelementStart(2, \"h2\", 21);\n    i0.ɵɵtext(3, \"Link\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction EventomodalPage_ion_item_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-item\", 22);\n    i0.ɵɵlistener(\"click\", function EventomodalPage_ion_item_17_Template_ion_item_click_0_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.redirectmap();\n    });\n    i0.ɵɵelement(1, \"ion-icon\", 24);\n    i0.ɵɵelementStart(2, \"h2\", 21);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r4.x.local.description);\n  }\n}\n\nfunction EventomodalPage_ion_item_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-item\", 22);\n    i0.ɵɵlistener(\"click\", function EventomodalPage_ion_item_18_Template_ion_item_click_0_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return ctx_r15.redirectUser();\n    });\n    i0.ɵɵelement(1, \"ion-icon\", 25);\n    i0.ɵɵelementStart(2, \"h2\", 21);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r5.x.userID[1]);\n  }\n}\n\nfunction EventomodalPage_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵlistener(\"click\", function EventomodalPage_div_25_Template_div_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r19);\n      const kdcoment_r17 = restoredCtx.$implicit;\n      const ctx_r18 = i0.ɵɵnextContext();\n      return ctx_r18.page(kdcoment_r17);\n    });\n    i0.ɵɵelementStart(1, \"ion-item\", 26);\n    i0.ɵɵelementStart(2, \"ion-avatar\", 27);\n    i0.ɵɵelement(3, \"img\", 28);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"h2\", 21);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const kdcoment_r17 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"src\", kdcoment_r17.img, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", kdcoment_r17.username, \" : \", kdcoment_r17.comentarioU, \" \");\n  }\n}\n\nexport let EventomodalPage = /*#__PURE__*/(() => {\n  class EventomodalPage {\n    constructor(alert, router, navparams, modal, Firebase, auth, firestore, iab) {\n      this.alert = alert;\n      this.router = router;\n      this.navparams = navparams;\n      this.modal = modal;\n      this.Firebase = Firebase;\n      this.auth = auth;\n      this.firestore = firestore;\n      this.iab = iab;\n      this.verdade = false;\n      this.UPnum = 0;\n      this.num = 30;\n      this.noAuth = true;\n      this.jadeuUP = false;\n      this.numcoments = 0;\n      this.dado = [];\n      this.comentario = \"\";\n      this.description = false;\n      this.numTimesLeft = 2;\n      this.ComentSet = {\n        img: '',\n        username: '',\n        comentarioU: '',\n        UID: ''\n      };\n    }\n\n    ngOnInit() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const res = yield this.auth.currentUser;\n\n        if (res != null) {\n          this.iduser = res.uid;\n          this.noAuth = false;\n        }\n\n        this.x = this.navparams.get('customid');\n        this.lugardocomentario = this.Firebase.database.ref(`coments/${this.x.id}`);\n        this.getComent();\n        this.UPnum = this.x.UPnum;\n\n        if (this.x.local) {\n          this.description = true;\n        }\n\n        this.jaUpou();\n      });\n    }\n\n    criandomodal(evento) {\n      this.x = evento;\n      moment.locale('pt-BR');\n      this.m = moment(this.x.dia).format('ddd DD MMM');\n      console.log(this.m);\n      this.eventoid = evento.id;\n    }\n\n    setcoment() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const res = yield this.auth.currentUser;\n\n        if (this.comentario != null && !this.comentario.trim()) {\n          this.showalert(\"Erro\", \"Digite um comentario\");\n        } else {\n          this.ComentSet = {\n            img: res.photoURL,\n            username: res.displayName,\n            comentarioU: this.comentario,\n            UID: this.iduser\n          };\n          this.lugardocomentario.push(this.ComentSet);\n          this.comentario = \"\";\n        }\n      });\n    }\n\n    getComent() {\n      this.lugaresdocomentario = this.Firebase.list(`coments/${this.x.id}`, ref => ref.limitToFirst(this.num));\n      this.lugaresdocomentario.valueChanges().subscribe(data => {\n        this.trataDados(data);\n      });\n    }\n\n    UP() {\n      return __awaiter(this, void 0, void 0, function* () {\n        if (this.iduser == null) {\n          this.jadeuUP = true;\n          return this.showAlertLogin();\n        }\n\n        this.jadeuUP = true;\n        const res = yield this.auth.currentUser;\n\n        if (this.x.up.includes(this.iduser)) {\n          return this.showalert(\"Ops!\", \"Você ja deu UP nesse evento\");\n        }\n\n        this.x.UPnum += 1;\n        this.UPnum += 1;\n        this.updateReference = this.firestore.doc(`eventos/${this.x.id}`);\n        this.updateReference.update({\n          up: firebase.firestore.FieldValue.arrayUnion(res.uid),\n          UPnum: firebase.firestore.FieldValue.increment(1)\n        });\n      });\n    }\n\n    jaUpou() {\n      if (this.x.up.includes(this.iduser)) {\n        this.jadeuUP = true;\n      }\n    }\n\n    comentauth() {\n      if (this.iduser == null) {\n        this.showAlertLogin();\n      }\n    }\n\n    redirectmap() {\n      this.iab.create(`https://www.google.com/maps/search/?api=1&query=${this.x.local.description}`, '_system');\n    }\n\n    redirectlink() {\n      this.iab.create(`${this.x.ingresso}`, '_system');\n    }\n\n    redirectUser() {\n      this.close();\n      this.router.navigate(['/usuario-pesquisa/' + this.x.userID[0]]);\n    }\n\n    showalert(header, message) {\n      return __awaiter(this, void 0, void 0, function* () {\n        const alert = yield this.alert.create({\n          header,\n          message,\n          buttons: [\"Ok\"]\n        });\n        yield alert.present();\n      });\n    }\n\n    trataDados(dados) {\n      this.coments = Object.keys(dados).map(i => dados[i]).reverse();\n      this.numcoments = this.coments.length;\n      this.todoscoments = this.coments;\n      console.log(this.todoscoments, 'foi');\n    }\n\n    showAlertLogin() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const alert = yield this.alert.create({\n          header: 'Ops!',\n          message: 'Crie ou entre em uma conta para usar ups e comentários.',\n          buttons: [{\n            text: 'Criar / Entrar',\n            handler: () => {\n              this.router.navigate(['/criar-user']);\n              this.close();\n            }\n          }, {\n            text: 'Ok',\n            handler: () => {\n              console.log('Confirm Okay');\n            }\n          }]\n        });\n        yield alert.present();\n      });\n    }\n\n    loadcoments(event) {\n      this.num = this.num + 60;\n      this.numTimesLeft -= 1;\n      this.getComent();\n      this.content.scrollToBottom();\n      event.target.complete();\n    }\n\n    page(kdcoment) {\n      this.userIDCOMENT = kdcoment.UID;\n      this.close();\n      this.router.navigate(['/usuario-pesquisa/' + this.userIDCOMENT]);\n    }\n\n    close() {\n      this.modal.dismiss();\n    }\n\n    Compartilhar() {\n      this.router.navigate(['/share/' + this.x.chave2]);\n      this.close();\n    }\n\n  }\n\n  EventomodalPage.ɵfac = function EventomodalPage_Factory(t) {\n    return new (t || EventomodalPage)(i0.ɵɵdirectiveInject(i1.AlertController), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i1.NavParams), i0.ɵɵdirectiveInject(i1.ModalController), i0.ɵɵdirectiveInject(i3.AngularFireDatabase), i0.ɵɵdirectiveInject(i4.AngularFireAuth), i0.ɵɵdirectiveInject(i5.AngularFirestore), i0.ɵɵdirectiveInject(i6.InAppBrowser));\n  };\n\n  EventomodalPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: EventomodalPage,\n    selectors: [[\"app-eventomodal\"]],\n    viewQuery: function EventomodalPage_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(IonContent, 7);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.content = _t.first);\n      }\n    },\n    decls: 28,\n    vars: 14,\n    consts: [[\"size\", \"large\", \"class\", \"centertt\", 3, \"click\", 4, \"ngIf\"], [\"name\", \"chevron-down-sharp\", 1, \"icon\", 3, \"click\"], [1, \"black\"], [1, \"card\"], [\"class\", \"imag\", 3, \"src\", \"click\", 4, \"ngIf\"], [\"lines\", \"none\", \"no-lines\", \"\"], [\"size\", \"small\", \"color\", \"primary\", \"slot\", \"start\", 3, \"disabled\", \"click\"], [\"size\", \"large\", \"name\", \"chatbubble-sharp\", \"slot\", \"start\"], [4, \"ngIf\"], [3, \"click\", 4, \"ngIf\"], [\"lines\", \"none\", 3, \"click\"], [\"no-lines\", \"\"], [\"placeholder\", \"Comentario:\", \"type\", \"string\", 3, \"disabled\", \"ngModel\", \"ngModelChange\"], [\"color\", \"primary\", 3, \"disabled\", \"click\"], [\"lines\", \"none\"], [3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"threshold\", \"40%\", 3, \"disabled\", \"ionInfinite\"], [\"loadingSpinner\", \"bubbles\", \"loadingText\", \"Carregando...\"], [\"size\", \"large\", 1, \"centertt\", 3, \"click\"], [1, \"imag\", 3, \"src\", \"click\"], [\"name\", \"calendar-outline\", \"item-start\", \"\"], [1, \"com\"], [3, \"click\"], [\"name\", \"globe-outline\"], [\"name\", \"location-sharp\", \"size\", \"large\"], [\"name\", \"person-sharp\"], [\"id\", \"output\"], [\"item-start\", \"\"], [3, \"src\"]],\n    template: function EventomodalPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\");\n        i0.ɵɵelementStart(1, \"ion-toolbar\");\n        i0.ɵɵtemplate(2, EventomodalPage_ion_title_2_Template, 2, 1, \"ion-title\", 0);\n        i0.ɵɵelementStart(3, \"ion-icon\", 1);\n        i0.ɵɵlistener(\"click\", function EventomodalPage_Template_ion_icon_click_3_listener() {\n          return ctx.close();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"ion-content\", 2);\n        i0.ɵɵelementStart(5, \"ion-card\", 3);\n        i0.ɵɵtemplate(6, EventomodalPage_img_6_Template, 1, 1, \"img\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"ion-list\", 5);\n        i0.ɵɵelementStart(8, \"ion-item\");\n        i0.ɵɵelementStart(9, \"ion-button\", 6);\n        i0.ɵɵlistener(\"click\", function EventomodalPage_Template_ion_button_click_9_listener() {\n          return ctx.UP();\n        });\n        i0.ɵɵtext(10, \"UP\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"ion-item\");\n        i0.ɵɵelement(13, \"ion-icon\", 7);\n        i0.ɵɵtext(14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(15, EventomodalPage_ion_item_15_Template, 4, 1, \"ion-item\", 8);\n        i0.ɵɵtemplate(16, EventomodalPage_ion_item_16_Template, 4, 0, \"ion-item\", 9);\n        i0.ɵɵtemplate(17, EventomodalPage_ion_item_17_Template, 4, 1, \"ion-item\", 9);\n        i0.ɵɵtemplate(18, EventomodalPage_ion_item_18_Template, 4, 1, \"ion-item\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"ion-list\", 10);\n        i0.ɵɵlistener(\"click\", function EventomodalPage_Template_ion_list_click_19_listener() {\n          return ctx.comentauth();\n        });\n        i0.ɵɵelementStart(20, \"ion-item\", 11);\n        i0.ɵɵelementStart(21, \"ion-input\", 12);\n        i0.ɵɵlistener(\"ngModelChange\", function EventomodalPage_Template_ion_input_ngModelChange_21_listener($event) {\n          return ctx.comentario = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"ion-button\", 13);\n        i0.ɵɵlistener(\"click\", function EventomodalPage_Template_ion_button_click_22_listener() {\n          return ctx.setcoment();\n        });\n        i0.ɵɵtext(23, \" Enviar \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"ion-list\", 14);\n        i0.ɵɵtemplate(25, EventomodalPage_div_25_Template, 6, 3, \"div\", 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"ion-infinite-scroll\", 16);\n        i0.ɵɵlistener(\"ionInfinite\", function EventomodalPage_Template_ion_infinite_scroll_ionInfinite_26_listener($event) {\n          return ctx.loadcoments($event);\n        });\n        i0.ɵɵelement(27, \"ion-infinite-scroll-content\", 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.x);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.x);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"disabled\", ctx.jadeuUP);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" \", ctx.UPnum, \" \");\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\" \", ctx.numcoments, \" \");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.x);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.x);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.description);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.x);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"disabled\", ctx.noAuth)(\"ngModel\", ctx.comentario);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"disabled\", !ctx.comentario.length);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.coments);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"disabled\", ctx.numTimesLeft <= 0);\n      }\n    },\n    directives: [i1.IonHeader, i1.IonToolbar, i7.NgIf, i1.IonIcon, i1.IonContent, i1.IonCard, i1.IonList, i1.IonItem, i1.IonButton, i1.IonInput, i1.TextValueAccessor, i8.NgControlStatus, i8.NgModel, i7.NgForOf, i1.IonInfiniteScroll, i1.IonInfiniteScrollContent, i1.IonTitle, i1.IonAvatar],\n    styles: [\"ion-content[_ngcontent-%COMP%]{--background: black}.card[_ngcontent-%COMP%]{background-color:#1c1c1c;color:#fff}.imag[_ngcontent-%COMP%]{height:50%;width:100%;align-content:center!important;max-height:35vh!important;width:100%!important;-o-object-fit:cover!important;object-fit:cover!important}ion-item[_ngcontent-%COMP%]{--background: #000000;--color:#FFFFFF}ion-col[_ngcontent-%COMP%]{--background: #000000;--color:#FFFFFF}.p[_ngcontent-%COMP%]{margin-bottom:-25px}.black[_ngcontent-%COMP%]{background-color:#000}.textevent[_ngcontent-%COMP%]{color:#fff;margin-right:25ex}.icon[_ngcontent-%COMP%]{color:#fff}ion-toolbar[_ngcontent-%COMP%]{--padding-top: 24px ;--background: black;--color: white}.centertt[_ngcontent-%COMP%]{text-align:center;background-color:#000;color:#fff}.branco[_ngcontent-%COMP%]{color:#fff;text-align:center}.com[_ngcontent-%COMP%]{font-size:2ex;padding-left:1ex}.badge[_ngcontent-%COMP%]{font-size:2ex}.inic[_ngcontent-%COMP%]{--min-height:2em;letter-spacing:0,5ex}.icon[_ngcontent-%COMP%]{padding-left:46ex}\"]\n  });\n  return EventomodalPage;\n})();","map":null,"metadata":{},"sourceType":"module"}