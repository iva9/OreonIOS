{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { AngularFireDatabase } from '@angular/fire/database'; //import { FirebaseListObservable } from '';\n\nimport { AngularFirestore } from '@angular/fire/firestore';\nimport { AngularFireAuth } from \"@angular/fire/auth\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/fire/firestore\";\nimport * as i2 from \"@angular/fire/auth\";\nimport * as i3 from \"@angular/fire/database\";\nexport let EventoService = /*#__PURE__*/(() => {\n  class EventoService {\n    constructor(firebase, firestore, auth) {\n      this.firebase = firebase;\n      this.firestore = firestore;\n      this.auth = auth;\n      this.dataSet = {\n        nome: '',\n        url: '',\n        ingresso: \"\",\n        dia: '',\n        fim: '',\n        local: '',\n        lugar: '',\n        up: [],\n        userID: [],\n        UPnum: 0\n      };\n      this.dataSet2 = {\n        nome: '',\n        url: '',\n        ingresso: \"\",\n        dia: '',\n        fim: '',\n        local: '',\n        lugar: '',\n        up: [],\n        userID: [],\n        chave2: '',\n        passado: false,\n        UPnum: 0\n      };\n      this.dataSet3 = {\n        online: 'online',\n        nome: '',\n        url: '',\n        link: '',\n        dia: '',\n        fim: '',\n        up: [],\n        userID: [],\n        chave2: '',\n        passado: false,\n        UPnum: 0\n      };\n      this.dataSet4 = {\n        online: 'online',\n        nome: '',\n        url: '',\n        link: '',\n        dia: '',\n        fim: '',\n        up: [],\n        passado: false,\n        userID: [],\n        UPnum: 0\n      };\n      this.msg = 'error';\n      this.eventocolection = this.firestore.collection('eventos', ref => ref.orderBy('up', 'desc'));\n      this.eventocidade = this.firestore.collection('eventos', ref => ref.orderBy('up', 'desc').where('lugar', '==', `Brasilia`));\n    } //this.test = this.firestore.collection<Data>('eventos' , ref => ref.where('lugar ','==' ,`${this.cidadesDoUsuario[0].item}`).orderBy('up').limit(20))\n\n\n    getImageDetailList() {\n      this.eventDetailListRealtime = this.firebase.list('eventDetails');\n      this.eventDetailList = this.firestore.collection('eventos');\n    }\n\n    insertImageDetails(nome, url, ingresso, dia, fim, local, lugar) {\n      return __awaiter(this, void 0, void 0, function* () {\n        const res = yield this.auth.currentUser;\n        this.dataSet = {\n          nome: nome,\n          url: url,\n          ingresso: ingresso,\n          dia: dia,\n          fim: fim,\n          local: local,\n          lugar: lugar,\n          up: [res.uid],\n          userID: [res.uid, res.displayName],\n          UPnum: 1\n        };\n        yield this.eventDetailListRealtime.push(this.dataSet).then(result => {\n          console.log(result.key);\n          var chave = result.key;\n          this.keydb2 = chave;\n          var dataseet = this.dataSet;\n          this.firebase.database.ref(`eventDetails/${result.key}/`).set({\n            chave,\n            dataseet\n          });\n        });\n        this.dataSet2 = {\n          nome: nome,\n          url: url,\n          ingresso: ingresso,\n          dia: dia,\n          fim: fim,\n          local: local,\n          lugar: lugar,\n          up: [res.uid],\n          userID: [res.uid, res.displayName],\n          chave2: this.keydb2,\n          passado: false,\n          UPnum: 1\n        };\n        yield this.eventDetailList.add(this.dataSet2);\n      });\n    } //----------------------------------------------------------------------------------------------//\n\n\n    insertOnline(nome, url, link, dia, fim) {\n      return __awaiter(this, void 0, void 0, function* () {\n        const res = yield this.auth.currentUser;\n        this.dataSet4 = {\n          online: 'online',\n          nome: nome,\n          url: url,\n          link: link,\n          dia: dia,\n          fim: fim,\n          passado: false,\n          up: [res.uid],\n          userID: [res.uid, res.displayName],\n          UPnum: 1\n        };\n        yield this.eventDetailListRealtime.push(this.dataSet4).then(result => {\n          console.log(result.key);\n          var chave = result.key;\n          this.keydb2 = chave;\n          var dataseet = this.dataSet4;\n          this.firebase.database.ref(`eventDetails/${result.key}/`).set({\n            chave,\n            dataseet\n          });\n        });\n        this.dataSet3 = {\n          online: 'online',\n          nome: nome,\n          url: url,\n          link: link,\n          dia: dia,\n          fim: fim,\n          up: [res.uid],\n          userID: [res.uid, res.displayName],\n          chave2: this.keydb2,\n          passado: false,\n          UPnum: 1\n        };\n        yield this.eventDetailList.add(this.dataSet3);\n      });\n    }\n\n    getEventos() {// return this.eventocolection.snapshotChanges((['added'])).pipe(\n      //   map(actions => {\n      //   return actions.map(a => {\n      //   const data = a.payload.doc.data();\n      // const id = a.payload.doc.id;\n      //return { id, ...data };\n      // });\n      // })\n      //) \n    }\n\n  }\n\n  EventoService.ɵfac = function EventoService_Factory(t) {\n    return new (t || EventoService)(i0.ɵɵinject(AngularFireDatabase), i0.ɵɵinject(i1.AngularFirestore), i0.ɵɵinject(i2.AngularFireAuth));\n  };\n\n  EventoService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: EventoService,\n    factory: EventoService.ɵfac,\n    providedIn: 'root'\n  });\n  return EventoService;\n})();","map":null,"metadata":{},"sourceType":"module"}